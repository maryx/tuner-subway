function uN(){for(var e=document.querySelectorAll(".n"),t=e.length,n=0;n<Math.max(ct.f.length,t);n++){var a;n>=t?a=document.createElement("div"):(a=e[n],a.style.display=""),n>=ct.f.length&&(a.style.display="none"),a.setAttribute("class","n "+CO[ct.n[n]]),a.innerHTML=ct.n[n],n>=t&&document.getElementById("ns").appendChild(a)}}function aT(){var e=document.createElement("h3");e.innerText="Press above notes or keyboard number keys, starting at 1",document.body.appendChild(e);var t=document.createElement("h3");t.innerText="Other tuners: ",document.body.appendChild(t);for(var n=0;n<T.length;n++){var a=document.createElement("div");a.setAttribute("class","t "+CO[T[n]]),a.innerText=T[n],t.appendChild(a)}}function aL(){document.onkeydown=function(t){var n=t.keyCode-KO;n>-1&&n<ct.f.length&&e[n].classList.add("ac")},document.onkeyup=function(t){var n=t.keyCode-KO;if(n>-1&&n<ct.f.length){e[n].classList.remove("ac"),cA();try{pSN(n)}catch(t){pFN(t,n)}}};var e=document.querySelectorAll(".n");[].forEach.call(e,function(e,t){e.addEventListener("mouseup",function(e){cA();try{pSN(t)}catch(e){pFN(e,t)}})})}function cA(){src1&&null!==src1&&(src1.stop(),src1=null),src2&&null!==src2&&(src2.stop(),src2=null),aud&&null!==aud&&"closed"!==aud.state&&aud.close()}function pSN(e){aud=new AudioContext;var t=aud.createBuffer(CH,FC,SR);src1=createSource(t,e,1e4,function(e){return e}),(ct.s.startsWith("S")||ct.s.startsWith("D")||ct.s.endsWith("k"))&&(src2=createSource(t,e,-5e3,function(e){return Math.floor(5e3*e)/2500}))}function pFN(e,t){console.error(e);var n=document.getElementById("p");ct.m&&n.setAttribute("src",ct.m[t]+".mp3")}function createSource(e,t,n,a){for(var c=aud.createBufferSource(),r=0;CH>r;r++)for(var o=e.getChannelData(r),s=0;FC>s;s++)o[s]=a(Math.sin(2*s*Math.PI*ct.f[t]/SR))*s/FC*(FC-s)/FC;c.buffer=e,c.connect(aud.destination);var d=aud.createGain();return c.connect(d),d.connect(aud.destination),d.gain.value=n,c.start(0),c}window.AudioContext=window.AudioContext||window.webkitAudioContext;var C={E:{s:"Standard E Station / The Wall Street",f:[82.4069,110,146.832,195.998,246.942,329.628],n:["E","A","D","G","B","E"],m:["E","A","D","G","B","E2"]},D:{s:"Downtown D / Rocker Fellows Center",f:[73.4162,110,146.832,195.998,246.942,329.628],n:["D","A","D","G","B","E"]},B:{s:"Bass Phish Park",f:[41.2034,55,73.4162,97.9989],n:["E","A","D","G"]},1:{s:"Siren Charms Hall / Drop A# Avenue",f:[58.2705,87.3071,116.541,146.832,195.998,261.626],n:['A<span class="h">#</span>',"F",'A<span class="h">#</span>','D<span class="h">#</span>',"G","C"]},G:{s:"Banjo Blue Grass Garden",f:[391.995,146.832,195.998,246.942,293.665],n:["G","D","G","B","D"]},V:{s:"Violin Bridge / Grand Fiddle Junction",f:[195.998,293.665,440,659.255],n:["G","D","A","E"]},U:{s:"Ukulele Circle Beach-by-the-Sea",f:[391.995,261.626,329.628,440],n:["G","C","E","A"]}},KO=49,CH=2,SR=44100,FC=1.5*SR,CO={1:"g",A:"",'A<span class="h">#</span>':"r",B:"o",C:"",D:"o",'D<span class="h">#</span>':"r",E:"",F:"o",G:"g",V:"r",U:"r"},T=["E","D","B","1","G","V","U"],ct=C.E,aud=new AudioContext,src1=null,src2=null;document.addEventListener("DOMContentLoaded",function(e){uN(),aT(),aL();var t=document.querySelectorAll(".t");[].forEach.call(t,function(e,t){e.addEventListener("mousedown",function(t){ct=C[e.innerText],document.getElementById("s").innerText=ct.s,uN()})})});
